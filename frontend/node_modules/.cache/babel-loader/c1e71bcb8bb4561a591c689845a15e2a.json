{"ast":null,"code":"import _objectSpread from\"C:/Users/mhlvik001/Documents/LEARNING/FullStack (Django_React)/notesproject/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/mhlvik001/Documents/LEARNING/FullStack (Django_React)/notesproject/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/mhlvik001/Documents/LEARNING/FullStack (Django_React)/notesproject/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\mhlvik001\\\\Documents\\\\LEARNING\\\\FullStack (Django_React)\\\\notesproject\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from'react';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(_ref){var match=_ref.match,history=_ref.history;var noteId=match.params.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[noteId]);var getNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(noteId==\"new\")){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(noteId,\"/\"));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref2.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"/api/notes/create/\",{method:\"POST\",headers:{'Content-type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function createNote(){return _ref3.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/update/\"),{method:\"PUT\",headers:{'Content-type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function updateNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteId!=='new'&&!note.body){deleteNote();}else if(noteId!=='new'){updateNote();}else if(noteId=='new'&&note!==null){createNote();}history.push('/');};var deleteNote=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/delete/\"),{method:\"DELETE\",headers:{'Content-type':'application/json'}});history.push('/');case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref5.apply(this,arguments);};}();var handleChange=function handleChange(value){setNote(function(note){return _objectSpread(_objectSpread({},note),{},{'body':value});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","ReactComponent","ArrowLeft","Link","NotePage","match","history","noteId","params","id","note","setNote","getNote","fetch","response","json","data","createNote","method","headers","body","JSON","stringify","updateNote","handleSubmit","deleteNote","push","handleChange","value","e","target"],"sources":["C:/Users/mhlvik001/Documents/LEARNING/FullStack (Django_React)/notesproject/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg';\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst NotePage = ({ match, history }) => {\r\n\r\n    let noteId = match.params.id\r\n    let [note, setNote] = useState(null)\r\n\r\n    useEffect(() => {\r\n        getNote()\r\n    }, [noteId])\r\n\r\n    let getNote = async ()=> {\r\n        if (noteId == \"new\") return \r\n\r\n        let response = await fetch(`/api/notes/${noteId}/`)\r\n        let data = await response.json()\r\n        setNote(data)\r\n    }\r\n\r\n    let createNote = async () => {\r\n        fetch(`/api/notes/create/`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-type': 'application/json'\r\n            },\r\n            body: JSON.stringify(note)\r\n        })\r\n    }\r\n\r\n    let updateNote = async () => {\r\n        fetch(`/api/notes/${noteId}/update/`, {\r\n            method: \"PUT\",\r\n            headers: {\r\n                'Content-type': 'application/json'\r\n            },\r\n            body: JSON.stringify(note)\r\n        })\r\n    }\r\n\r\n    let handleSubmit = () => {\r\n        if (noteId !== 'new' && !note.body){\r\n            deleteNote()\r\n        } else if (noteId !== 'new') {\r\n            updateNote()\r\n        } else if (noteId == 'new' && note !== null){\r\n            createNote()\r\n        }\r\n        history.push('/')\r\n    }\r\n\r\n    let deleteNote = async ()=> {\r\n        fetch(`/api/notes/${noteId}/delete/`, {\r\n            method: \"DELETE\",\r\n            headers: {\r\n                'Content-type': 'application/json'\r\n            }\r\n        })\r\n        history.push('/')\r\n    }\r\n\r\n    let handleChange = (value) => {\r\n        setNote(note => ({...note, 'body':value}))\r\n    }\r\n\r\n  return (\r\n    <div className='note'>\r\n        <div className='note-header'>\r\n            <h3>\r\n                <ArrowLeft onClick={handleSubmit}/>\r\n            </h3>\r\n            { noteId !== 'new' ? (\r\n                <button onClick={deleteNote}>Delete</button>\r\n            ) : (\r\n                <button onClick={handleSubmit}>Done</button>\r\n            )}\r\n\r\n        </div>\r\n        <textarea onChange={(e) => { handleChange(e.target.value) }} value={note?.body}></textarea>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NotePage"],"mappings":"srBAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,cAAc,GAAIC,UAA3B,KAA4C,0BAA5C,CACA,OAASC,IAAT,KAAqB,kBAArB,C,wFAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,MAAwB,IAArBC,MAAqB,MAArBA,KAAqB,CAAdC,OAAc,MAAdA,OAAc,CAErC,GAAIC,OAAM,CAAGF,KAAK,CAACG,MAAN,CAAaC,EAA1B,CACA,cAAsBV,QAAQ,CAAC,IAAD,CAA9B,wCAAKW,IAAL,eAAWC,OAAX,eAEAX,SAAS,CAAC,UAAM,CACZY,OAAO,GACV,CAFQ,CAEN,CAACL,MAAD,CAFM,CAAT,CAIA,GAAIK,QAAO,2FAAG,0JACNL,MAAM,EAAI,KADJ,wFAGWM,MAAK,sBAAeN,MAAf,MAHhB,QAGNO,QAHM,qCAIOA,SAAQ,CAACC,IAAT,EAJP,QAINC,IAJM,eAKVL,OAAO,CAACK,IAAD,CAAP,CALU,sDAAH,kBAAPJ,QAAO,2CAAX,CAQA,GAAIK,WAAU,2FAAG,wIACbJ,KAAK,sBAAuB,CACxBK,MAAM,CAAE,MADgB,CAExBC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFe,CAKxBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeZ,IAAf,CALkB,CAAvB,CAAL,CADa,wDAAH,kBAAVO,WAAU,2CAAd,CAUA,GAAIM,WAAU,2FAAG,wIACbV,KAAK,sBAAeN,MAAf,aAAiC,CAClCW,MAAM,CAAE,KAD0B,CAElCC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFyB,CAKlCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeZ,IAAf,CAL4B,CAAjC,CAAL,CADa,wDAAH,kBAAVa,WAAU,2CAAd,CAUA,GAAIC,aAAY,CAAG,QAAfA,aAAe,EAAM,CACrB,GAAIjB,MAAM,GAAK,KAAX,EAAoB,CAACG,IAAI,CAACU,IAA9B,CAAmC,CAC/BK,UAAU,GACb,CAFD,IAEO,IAAIlB,MAAM,GAAK,KAAf,CAAsB,CACzBgB,UAAU,GACb,CAFM,IAEA,IAAIhB,MAAM,EAAI,KAAV,EAAmBG,IAAI,GAAK,IAAhC,CAAqC,CACxCO,UAAU,GACb,CACDX,OAAO,CAACoB,IAAR,CAAa,GAAb,EACH,CATD,CAWA,GAAID,WAAU,2FAAG,wIACbZ,KAAK,sBAAeN,MAAf,aAAiC,CAClCW,MAAM,CAAE,QAD0B,CAElCC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFyB,CAAjC,CAAL,CAMAb,OAAO,CAACoB,IAAR,CAAa,GAAb,EAPa,wDAAH,kBAAVD,WAAU,2CAAd,CAUA,GAAIE,aAAY,CAAG,QAAfA,aAAe,CAACC,KAAD,CAAW,CAC1BjB,OAAO,CAAC,SAAAD,IAAI,wCAASA,IAAT,MAAe,OAAOkB,KAAtB,IAAL,CAAP,CACH,CAFD,CAIF,mBACE,aAAK,SAAS,CAAC,MAAf,wBACI,aAAK,SAAS,CAAC,aAAf,wBACI,iCACI,KAAC,SAAD,EAAW,OAAO,CAAEJ,YAApB,EADJ,EADJ,CAIMjB,MAAM,GAAK,KAAX,cACE,eAAQ,OAAO,CAAEkB,UAAjB,oBADF,cAGE,eAAQ,OAAO,CAAED,YAAjB,kBAPR,GADJ,cAYI,iBAAU,QAAQ,CAAE,kBAACK,CAAD,CAAO,CAAEF,YAAY,CAACE,CAAC,CAACC,MAAF,CAASF,KAAV,CAAZ,CAA8B,CAA3D,CAA6D,KAAK,CAAElB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEU,IAA1E,EAZJ,GADF,CAgBD,CA9ED,CAgFA,cAAehB,SAAf"},"metadata":{},"sourceType":"module"}